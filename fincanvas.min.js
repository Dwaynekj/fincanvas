!function t(e,n,i){function s(o,a){if(!n[o]){if(!e[o]){var c="function"==typeof require&&require;if(!a&&c)return c(o,!0);if(r)return r(o,!0);throw new Error("Cannot find module '"+o+"'")}var u=n[o]={exports:{}};e[o][0].call(u.exports,function(t){var n=e[o][1][t];return s(n?n:t)},u,u.exports,t,e,n,i)}return n[o].exports}for(var r="function"==typeof require&&require,o=0;o<i.length;o++)s(i[o]);return s}({1:[function(t,e,n){"use strict";function i(t,e){Object.defineProperty(this,t,{value:e,writable:!1,enumerable:!0,configurable:!1})}function s(t,e){i.call(this,"x",Number(t)||0),i.call(this,"y",Number(e)||0)}function r(t,e,n,r){t=Number(t)||0,e=Number(e)||0,n=Number(n)||0,r=Number(r)||0,0>n&&(t+=n,n=-n),0>r&&(e+=r,r=-r),i.call(this,"origin",new s(t,e)),i.call(this,"extent",new s(n,r)),i.call(this,"corner",new s(t+n,e+r)),i.call(this,"center",new s(t+n/2,e+r/2))}s.prototype={plus:function(t){return new s(this.x+t.x,this.y+t.y)},plusXY:function(t,e){return new s(this.x+(t||0),this.y+(e||0))},minus:function(t){return new s(this.x-t.x,this.y-t.y)},min:function(t){return new s(Math.min(this.x,t.x),Math.min(this.y,t.y))},max:function(t){return new s(Math.max(this.x,t.x),Math.max(this.y,t.y))},distance:function(t){var e=t.x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},equals:function(t){var e=!1;return t&&(e=this.x===t.x&&this.y===t.y),e},greaterThan:function(t){return this.x>t.x&&this.y>t.y},lessThan:function(t){return this.x<t.x&&this.y<t.y},greaterThanOrEqualTo:function(t){return this.x>=t.x&&this.y>=t.y},lessThanOrEqualTo:function(t){return this.x<=t.x&&this.y<=t.y},within:function(t){var e=t.origin.x,n=e+t.extent.x,i=t.origin.y,s=i+t.extent.y;return t.extent.x<0&&(e=n,n=t.origin.x),t.extent.y<0&&(i=s,s=t.origin.y),e<=this.x&&this.x<n&&i<=this.y&&this.y<s}},s.prototype.EQ=s.prototype.equals,s.prototype.GT=s.prototype.greaterThan,s.prototype.LT=s.prototype.lessThan,s.prototype.GE=s.prototype.greaterThanOrEqualTo,s.prototype.LE=s.prototype.lessThanOrEqualTo,r.prototype={get top(){return this.origin.y},get left(){return this.origin.x},get bottom(){return this.corner.y},get right(){return this.corner.x},get width(){return this.extent.x},get height(){return this.extent.y},get area(){return this.width*this.height},flattenXAt:function(t){return new r(t,this.origin.y,0,this.extent.y)},flattenYAt:function(t){return new r(this.origin.x,t,this.extent.x,0)},contains:function(t){return t.within(this)},within:function(t){return t.origin.lessThanOrEqualTo(this.origin)&&t.corner.greaterThanOrEqualTo(this.corner)},growBy:function(t){return new r(this.origin.x+t,this.origin.y+t,this.extent.x-t-t,this.extent.y-t-t)},shrinkBy:function(t){return this.growBy(-t)},union:function(t){var e=this.origin.min(t.origin),n=this.corner.max(t.corner),i=n.minus(e);return new r(e.x,e.y,i.x,i.y)},forEach:function(t,e){e=e||this;for(var n=this.origin.x,i=this.corner.x;i>n;n++)for(var s=this.origin.y,r=this.corner.y;r>s;s++)t.call(e,n,s)},intersect:function(t,e,n){var i=null,s=this.origin.max(t.origin),o=this.corner.min(t.corner),a=o.minus(s);return a.x>0&&a.y>0?i=new r(s.x,s.y,a.x,a.y):"function"==typeof e&&(i=e.call(n||this,t)),i},intersects:function(t){return t.corner.x>this.origin.x&&t.corner.y>this.origin.y&&t.origin.x<this.corner.x&&t.origin.y<this.corner.y}},n.Point=s,n.Rectangle=r},{}],2:[function(t,e,n){"use strict";window.fin||(window.fin={}),window.fin.Canvas||(window.fin.Canvas=t("./"))},{"./":3}],3:[function(t,e,n){"use strict";function i(t,e,n){var i=this;this.div=t,this.component=e,n=n||{},this.doubleClickDelay=n.doubleClickDelay||325,this.dragEndtime=Date.now(),this.canvas=document.createElement("canvas"),this.div.appendChild(this.canvas),this.canvas.style.outline="none",this.canvasCTX=this.canvas.getContext("2d"),this.gc=new u(this.canvasCTX),this.buffer=document.createElement("canvas"),this.bufferCTX=this.buffer.getContext("2d"),this.bufferGC=new u(this.bufferCTX),this.mouseLocation=new a.Point(-1,-1),this.dragstart=new a.Point(-1,-1),this.bounds=new a.Rectangle(0,0,0,0),this.hasMouse=!1,document.addEventListener("mousemove",function(t){(i.hasMouse||i.isDragging())&&i.finmousemove(t)}),document.addEventListener("mouseup",function(t){i.finmouseup(t)}),document.addEventListener("wheel",function(t){i.finwheelmoved(t)}),document.addEventListener("keydown",function(t){i.finkeydown(t)}),document.addEventListener("keyup",function(t){i.finkeyup(t)}),this.canvas.onmouseover=function(){i.hasMouse=!0},this.canvas.addEventListener("focus",function(t){i.finfocusgained(t)}),this.canvas.addEventListener("blur",function(t){i.finfocuslost(t)}),this.canvas.addEventListener("mousedown",function(t){i.finmousedown(t)}),this.canvas.addEventListener("mouseout",function(t){i.hasMouse=!1,i.finmouseout(t)}),this.canvas.addEventListener("click",function(t){i.finclick(t)}),this.canvas.addEventListener("contextmenu",function(t){return i.fincontextmenu(t),t.preventDefault(),!1}),c.addEventListener(this.canvas,"tap",function(t){i.fintap(t)}),c.addEventListener(this.canvas,"holdpulse",function(t){i.finholdpulse(t)}),c.addEventListener(this.canvas,"flick",function(t){i.finflick(t)}),c.addEventListener(this.canvas,"release",function(t){i.finrelease(t)}),c.addEventListener(this.canvas,"trackstart",function(t){i.fintrackstart(t)}),c.addEventListener(this.canvas,"track",function(t){i.fintrack(t)}),c.addEventListener(this.canvas,"trackend",function(t){i.fintrackend(t)}),this.canvas.setAttribute("tabindex",0),this.canvas.contentEditable=!0,this.resize(),this.beginResizing(),this.beginPainting()}function s(t){if(f){for(var e=0;e<l.length;e++)try{l[e].tickPainter(t)}catch(n){console.error(n)}requestAnimationFrame(s)}}function r(t){if(p)for(var e=0;e<d.length;e++)try{d[e].tickResizer(t)}catch(n){console.error(n)}}function o(){for(var t=[],e=["",""],n=0;256>n;n++)t[n]=e;return t[27]=["ESC","ESCSHIFT"],t[192]=["`","~"],t[49]=["1","!"],t[50]=["2","@"],t[51]=["3","#"],t[52]=["4","$"],t[53]=["5","%"],t[54]=["6","^"],t[55]=["7","&"],t[56]=["8","*"],t[57]=["9","("],t[48]=["0",")"],t[189]=["-","_"],t[187]=["=","+"],t[8]=["BACKSPACE","BACKSPACESHIFT"],t[46]=["DELETE","DELETESHIFT"],t[9]=["TAB","TABSHIFT"],t[81]=["q","Q"],t[87]=["w","W"],t[69]=["e","E"],t[82]=["r","R"],t[84]=["t","T"],t[89]=["y","Y"],t[85]=["u","U"],t[73]=["i","I"],t[79]=["o","O"],t[80]=["p","P"],t[219]=["[","{"],t[221]=["]","}"],t[220]=["\\","|"],t[220]=["CAPSLOCK","CAPSLOCKSHIFT"],t[65]=["a","A"],t[83]=["s","S"],t[68]=["d","D"],t[70]=["f","F"],t[71]=["g","G"],t[72]=["h","H"],t[74]=["j","J"],t[75]=["k","K"],t[76]=["l","L"],t[186]=[";",":"],t[222]=["'","|"],t[13]=["RETURN","RETURNSHIFT"],t[16]=["SHIFT","SHIFT"],t[90]=["z","Z"],t[88]=["x","X"],t[67]=["c","C"],t[86]=["v","V"],t[66]=["b","B"],t[78]=["n","N"],t[77]=["m","M"],t[188]=[",","<"],t[190]=[".",">"],t[191]=["/","?"],t[16]=["SHIFT","SHIFT"],t[17]=["CTRL","CTRLSHIFT"],t[18]=["ALT","ALTSHIFT"],t[91]=["COMMANDLEFT","COMMANDLEFTSHIFT"],t[32]=["SPACE","SPACESHIFT"],t[93]=["COMMANDRIGHT","COMMANDRIGHTSHIFT"],t[18]=["ALT","ALTSHIFT"],t[38]=["UP","UPSHIFT"],t[37]=["LEFT","LEFTSHIFT"],t[40]=["DOWN","DOWNSHIFT"],t[39]=["RIGHT","RIGHTSHIFT"],t[33]=["PAGEUP","PAGEUPSHIFT"],t[34]=["PAGEDOWN","PAGEDOWNSHIFT"],t[35]=["PAGERIGHT","PAGERIGHTSHIFT"],t[36]=["PAGELEFT","PAGELEFTSHIFT"],t[112]=["F1","F1SHIFT"],t[113]=["F2","F2SHIFT"],t[114]=["F3","F3SHIFT"],t[115]=["F4","F4SHIFT"],t[116]=["F5","F5SHIFT"],t[117]=["F6","F6SHIFT"],t[118]=["F7","F7SHIFT"],t[119]=["F8","F8SHIFT"],t[120]=["F9","F9SHIFT"],t[121]=["F10","F10SHIFT"],t[122]=["F11","F1S1HIFT"],t[123]=["F12","F121HIFT"],t}var a=t("rectangular"),c=t("./js/polymergestures.dev.js"),u=t("./js/GraphicsContext.js"),h=200,l=[],d=[],f=!0,p=!0,v=o();i.prototype={constructor:i.prototype.constructor,div:null,component:null,gestures:c,canvas:null,canvasCTX:null,focuser:null,buffer:null,ctx:null,mouseLocation:null,holdPulseCount:-1,dragstart:null,origin:null,bounds:null,dirty:!1,size:null,mousedown:!1,dragging:!1,repeatKeyCount:0,repeatKey:null,repeatKeyStartTime:0,currentKeys:[],hasMouse:!1,lastDoubleClickTime:0,dragEndTime:0,lastRepaintTime:0,addEventListener:function(t,e){this.canvas.addEventListener(t,e)},stopPaintLoop:function(){f=!1},restartPaintLoop:function(){f||(f=!0,requestAnimationFrame(s))},stopResizeLoop:function(){p=!1},restartResizeLoop:function(){p||(p=!0,setInterval(r,200))},detached:function(){this.stopPainting(),this.stopResizing()},useHiDPI:function(){return this.component.resolveProperty("useHiDPI")},useBitBlit:function(){return this.component.resolveProperty("useBitBlit")},getFPS:function(){var t=this.component.resolveProperty("repaintIntervalRate");return t?parseInt(t):0},tickPaint:function(t){var e=this.getFPS();if(0!==e){var n=1e3/e,i=t-this.lastRepaintTime;i>n&&this.dirty&&(this.lastRepaintTime=t-i%n,this.paintNow())}},beginPainting:function(){var t=this;this.dirty=!0,this.tickPainter=function(e){t.tickPaint(e)},l.push(this)},stopPainting:function(){l.splice(l.indexOf(this),1)},beginResizing:function(){var t=this;this.tickResizer=function(){t.checksize()},d.push(this)},stopResizing:function(){d.splice(d.indexOf(this),1)},start:function(){this.beginPainting(),this.beginResizing()},stop:function(){this.stopPainting(),this.stopResizing()},checksize:function(){var t=this.div.getBoundingClientRect();(t.width!==this.size.width||t.height!==this.size.height)&&this.sizeChangedNotification()},sizeChangedNotification:function(){this.resize()},setSizeBaseOn:function(t){var e=t.getBoundingClientRect();return this.canvas.width=this.buffer.width=e.width,this.canvas.height=this.buffer.height=e.height,e},resize:function(){var t=this.size=this.setSizeBaseOn(this.div),e=1,n=this.useBitBlit(),i=window.devicePixelRatio&&this.useHiDPI();if(i){var s=window.devicePixelRatio||1,r=this.canvasCTX.webkitBackingStorePixelRatio||this.canvasCTX.mozBackingStorePixelRatio||this.canvasCTX.msBackingStorePixelRatio||this.canvasCTX.oBackingStorePixelRatio||this.canvasCTX.backingStorePixelRatio||1;e=s/r}var o=this.canvas.getAttribute("width"),c=this.canvas.getAttribute("height");this.canvas.width=this.buffer.width=o*e,this.canvas.height=this.buffer.height=c*e,this.canvas.style.width=this.buffer.style.width=o+"px",this.canvas.style.height=this.buffer.style.height=c+"px",this.bufferCTX.scale(e,e),i&&!n&&this.canvasCTX.scale(e,e),this.bounds=new a.Rectangle(0,0,t.width,t.height);var u=this.component;u&&u.setBounds(this.bounds),this.resizeNotification(),this.paintNow()},resizeNotification:function(){},getBounds:function(){return this.bounds},paintNow:function(){var t=this;this.safePaintImmediately(function(e){t.setSizeBaseOn(t.canvas);var n=t.component;n&&n.paint(e),t.dirty=!1})},safePaintImmediately:function(t){var e=this.useBitBlit(),n=e?this.bufferGC:this.gc;try{n.save(),t(n)}catch(i){console.error(i)}finally{n.restore()}e&&this.flushBuffer()},flushBuffer:function(){this.buffer.width>0&&this.buffer.height>0&&this.canvasCTX.drawImage(this.buffer,0,0)},dispatchNewEvent:function(t,e,n){return n={detail:n||{}},n.detail.primitiveEvent=t,this.canvas.dispatchEvent(new CustomEvent(e,n))},dispatchNewMouseKeysEvent:function(t,e,n){return n=n||{},n.mouse=this.mouseLocation,n.keys=this.currentKeys,this.dispatchNewEvent(t,e,n)},finmousemove:function(t){!this.isDragging()&&this.mousedown&&(this.beDragging(),this.dispatchNewMouseKeysEvent(t,"fin-canvas-dragstart",{isRightClick:this.isRightClick(t)}),this.dragstart=new a.Point(this.mouseLocation.x,this.mouseLocation.y)),this.mouseLocation=this.getLocal(t),this.isDragging()&&this.dispatchNewMouseKeysEvent(t,"fin-canvas-drag",{dragstart:this.dragstart,isRightClick:this.isRightClick(t)}),this.bounds.contains(this.mouseLocation)&&this.dispatchNewMouseKeysEvent(t,"fin-canvas-mousemove")},finmousedown:function(t){this.mouseLocation=this.mouseDownLocation=this.getLocal(t),this.mousedown=!0,this.dispatchNewMouseKeysEvent(t,"fin-canvas-mousedown",{isRightClick:this.isRightClick(t)}),this.takeFocus()},finmouseup:function(t){this.isDragging()&&(this.dispatchNewMouseKeysEvent(t,"fin-canvas-dragend",{dragstart:this.dragstart,isRightClick:this.isRightClick(t)}),this.beNotDragging(),this.dragEndtime=Date.now()),this.mousedown=!1,this.dispatchNewMouseKeysEvent(t,"fin-canvas-mouseup",{isRightClick:this.isRightClick(t)})},finmouseout:function(t){this.mousedown||(this.mouseLocation=new a.Point(-1,-1)),this.dispatchNewMouseKeysEvent(t,"fin-canvas-mouseout")},finwheelmoved:function(t){!this.isDragging()&&this.hasFocus()&&(t.preventDefault(),this.dispatchNewMouseKeysEvent(t,"fin-canvas-wheelmoved",{isRightClick:this.isRightClick(t)}))},finclick:function(t){this.doubleClickTimer&&Date.now()-this.lastClickTime<this.doubleClickDelay?(clearTimeout(this.doubleClickTimer),this.doubleClickTimer=void 0,this.findblclick(t)):(this.lastClickTime=Date.now(),this.doubleClickTimer=setTimeout(function(){this.doubleClickTimer=void 0,this.mouseLocation=this.getLocal(t),this.dispatchNewMouseKeysEvent(t,"fin-canvas-click",{isRightClick:this.isRightClick(t)})}.bind(this),this.doubleClickDelay))},finrelease:function(t){this.holdPulseCount=0,this.mouseLocation=this.getLocal(t),this.dispatchNewMouseKeysEvent(t,"fin-canvas-release")},finflick:function(t){this.hasFocus()&&(this.mouseLocation=this.getLocal(t),this.dispatchNewMouseKeysEvent(t,"fin-canvas-flick",{isRightClick:this.isRightClick(t)}))},fintrackstart:function(t){this.hasFocus()&&(this.mouseLocation=this.getLocal(t),this.dispatchNewMouseKeysEvent(t,"fin-canvas-trackstart"))},fintrack:function(t){this.hasFocus()&&(this.mouseLocation=this.getLocal(t),this.dispatchNewMouseKeysEvent(t,"fin-canvas-track"))},fintrackend:function(t){this.mouseLocation=this.getLocal(t),this.dispatchNewMouseKeysEvent(t,"fin-canvas-trackend")},finhold:function(t){this.mouseLocation=this.getLocal(t),this.dispatchNewMouseKeysEvent(t,"fin-canvas-hold",{isRightClick:this.isRightClick(t)})},finholdpulse:function(t){this.mouseLocation=this.getLocal(t),this.dispatchNewMouseKeysEvent(t,"fin-canvas-holdpulse",{count:this.holdPulseCount++})},fintap:function(t){var e=this,n=Date.now(),i=n-this.lastDoubleClickTime;300>i||n-this.dragEndtime<100||setTimeout(function(){e._fintap(t)},180)},_fintap:function(t){var e=Date.now(),n=e-this.lastDoubleClickTime;300>n||(this.mouseDownLocation&&(this.mouseLocation=this.mouseDownLocation,this.mouseDownLocation=void 0),this.dispatchNewMouseKeysEvent(t,"fin-canvas-tap",{isRightClick:this.isRightClick(t)}))},findblclick:function(t){this.mouseLocation=this.getLocal(t),this.lastDoubleClickTime=Date.now(),this.dispatchNewMouseKeysEvent(t,"fin-canvas-dblclick",{isRightClick:this.isRightClick(t)})},getCharMap:function(){return v},finkeydown:function(t){if(this.hasFocus()){var e=t.shiftKey?v[t.keyCode][1]:v[t.keyCode][0];t.repeat?this.repeatKey===e?this.repeatKeyCount++:(this.repeatKey=e,this.repeatKeyStartTime=Date.now()):(this.repeatKey=null,this.repeatKeyCount=0,this.repeatKeyStartTime=0),-1===this.currentKeys.indexOf(e)&&this.currentKeys.push(e),this.dispatchNewEvent(t,"fin-canvas-keydown",{alt:t.altKey,ctrl:t.ctrlKey,"char":e,code:t.charCode,key:t.keyCode,meta:t.metaKey,repeatCount:this.repeatKeyCount,repeatStartTime:this.repeatKeyStartTime,shift:t.shiftKey,identifier:t.keyIdentifier,currentKeys:this.currentKeys.slice(0)})}},finkeyup:function(t){var e=t.shiftKey?v[t.keyCode][1]:v[t.keyCode][0];this.currentKeys.splice(this.currentKeys.indexOf(e),1),this.hasFocus()&&(this.repeatKeyCount=0,this.repeatKey=null,this.repeatKeyStartTime=0,this.dispatchNewEvent(t,"fin-canvas-keyup",{alt:t.altKey,ctrl:t.ctrlKey,"char":e,code:t.charCode,key:t.keyCode,meta:t.metaKey,repeat:t.repeat,shift:t.shiftKey,identifier:t.keyIdentifier,currentKeys:this.currentKeys.slice(0)}))},finfocusgained:function(t){this.dispatchNewEvent(t,"fin-canvas-focus-gained")},finfocuslost:function(t){this.dispatchNewEvent(t,"fin-canvas-focus-lost")},fincontextmenu:function(t){t.ctrlKey&&-1===this.currentKeys.indexOf("CTRL")&&this.currentKeys.push("CTRL"),this.doubleRightClickTimer&&Date.now()-this.lastClickTime<this.doubleClickDelay?(clearTimeout(this.doubleRightClickTimer),this.doubleRightClickTimer=void 0,this.findblclick(t)):(this.lastClickTime=Date.now(),this.doubleRightClickTimer=setTimeout(function(){this.doubleRightClickTimer=void 0,this.dispatchNewMouseKeysEvent(t,"fin-canvas-context-menu",{isRightClick:this.isRightClick(t)})}.bind(this),this.doubleClickDelay))},repaint:function(){var t=this.getFPS();this.dirty=!0,f&&0!==t||this.paintNow()},getMouseLocation:function(){return this.mouseLocation},getOrigin:function(){var t=this.canvas.getBoundingClientRect(),e=new a.Point(t.left,t.top);return e},getLocal:function(t){var e=this.canvas.getBoundingClientRect(),n=new a.Point(t.clientX-e.left,t.clientY-e.top);return n},hasFocus:function(){return document.activeElement===this.canvas},takeFocus:function(){var t=this;this.hasFocus()||setTimeout(function(){t.canvas.focus()},10)},beDragging:function(){this.dragging=!0,this.disableDocumentElementSelection()},beNotDragging:function(){this.dragging=!1,this.enableDocumentElementSelection()},isDragging:function(){return this.dragging},disableDocumentElementSelection:function(){var t=document.body.style;t.cssText=t.cssText+"-webkit-user-select: none"},enableDocumentElementSelection:function(){var t=document.body.style;t.cssText=t.cssText.replace("-webkit-user-select: none","")},setFocusable:function(t){this.focuser.style.display=t?"":"none"},isRightClick:function(t){var e;return t=t||window.event,"which"in t?e=3===t.which:"button"in t&&(e=2===t.button),e},dispatchEvent:function(t){return this.canvas.dispatchEvent(t)}},requestAnimationFrame(s),setInterval(r,h),e.exports=i},{"./js/GraphicsContext.js":4,"./js/polymergestures.dev.js":6,rectangular:1}],4:[function(t,e,n){"use strict";function i(t,e){function n(n){n in i.prototype||o.test(n)||("function"==typeof t[n]?r[n]=e?function(){return e(n,arguments,t[n].apply(t,arguments))}:t[n].bind(t):Object.defineProperty(r,n,{get:function(){var i=t[n];return e?e(n,"getter",i):i},set:function(i){t[n]=e?e(n,"setter",i):i}}))}this.gc=t;var r=this,o=/^webkit/;switch(typeof e){case"string":e=s.bind(void 0,e+".");break;case"boolean":e===!0&&(e=s.bind(void 0,"gc."));break;case"function":if(3!==e.length)throw"GraphicsContext: User-supplied API logger function does not accept three parameters.";break;default:e=!1}Object.keys(Object.getPrototypeOf(t)).forEach(n),Object.keys(t).forEach(n)}var s=t("./gc-console-logger");e.exports=i},{"./gc-console-logger":5}],5:[function(t,e,n){"use strict";function i(t,e,n,i){var r=i;switch("string"==typeof i&&(r='"'+r+'"'),e=t+e,n){case"getter":console.log(e,"=",r);break;case"setter":console.log(e,s,r);break;default:e+="("+Array.prototype.slice.call(n).join(", ")+")",void 0===r?console.log(e):console.log(e,s,r)}return i}var s="⟹";e.exports=i},{}],6:[function(t,e,n){!function(t){var e=!1,n=document.createElement("meta");if(n.createShadowRoot){var i=n.createShadowRoot(),s=document.createElement("span");i.appendChild(s),n.addEventListener("testpath",function(t){t.path&&(e=t.path[0]===s),t.stopPropagation()});var r=new CustomEvent("testpath",{bubbles:!0});document.head.appendChild(n),s.dispatchEvent(r),n.parentNode.removeChild(n),i=s=null}n=null;var o={shadow:function(t){return t?t.shadowRoot||t.webkitShadowRoot:void 0},canTarget:function(t){return t&&Boolean(t.elementFromPoint)},targetingShadow:function(t){var e=this.shadow(t);return this.canTarget(e)?e:void 0},olderShadow:function(t){var e=t.olderShadowRoot;if(!e){var n=t.querySelector("shadow");n&&(e=n.olderShadowRoot)}return e},allShadows:function(t){for(var e=[],n=this.shadow(t);n;)e.push(n),n=this.olderShadow(n);return e},searchRoot:function(t,e,n){var i,s;return t?(i=t.elementFromPoint(e,n),i?s=this.targetingShadow(i):t!==document&&(s=this.olderShadow(t)),this.searchRoot(s,e,n)||i):void 0},owner:function(t){if(!t)return document;for(var e=t;e.parentNode;)e=e.parentNode;return e.nodeType!=Node.DOCUMENT_NODE&&e.nodeType!=Node.DOCUMENT_FRAGMENT_NODE&&(e=document),e},findTarget:function(t){if(e&&t.path&&t.path.length)return t.path[0];var n=t.clientX,i=t.clientY,s=this.owner(t.target);return s.elementFromPoint(n,i)||(s=document),this.searchRoot(s,n,i)},findTouchAction:function(t){var n;if(e&&t.path&&t.path.length){for(var i=t.path,s=0;s<i.length;s++)if(n=i[s],n.nodeType===Node.ELEMENT_NODE&&n.hasAttribute("touch-action"))return n.getAttribute("touch-action")}else for(n=t.target;n;){if(n.nodeType===Node.ELEMENT_NODE&&n.hasAttribute("touch-action"))return n.getAttribute("touch-action");n=n.parentNode||n.host}return"auto"},LCA:function(t,e){if(t===e)return t;if(t&&!e)return t;if(e&&!t)return e;if(!e&&!t)return document;if(t.contains&&t.contains(e))return t;if(e.contains&&e.contains(t))return e;var n=this.depth(t),i=this.depth(e),s=n-i;for(s>=0?t=this.walk(t,s):e=this.walk(e,-s);t&&e&&t!==e;)t=t.parentNode||t.host,e=e.parentNode||e.host;return t},walk:function(t,e){for(var n=0;t&&e>n;n++)t=t.parentNode||t.host;return t},depth:function(t){for(var e=0;t;)e++,t=t.parentNode||t.host;return e},deepContains:function(t,e){var n=this.LCA(t,e);return n===t},insideNode:function(t,e,n){var i=t.getBoundingClientRect();return i.left<=e&&e<=i.right&&i.top<=n&&n<=i.bottom},path:function(t){var n;if(e&&t.path&&t.path.length)n=t.path;else{n=[];for(var i=this.findTarget(t);i;)n.push(i),i=i.parentNode||i.host}return n}};t.targetFinding=o,t.findTarget=o.findTarget.bind(o),t.deepContains=o.deepContains.bind(o),t.insideNode=o.insideNode}(n),function(){function t(t){return"html /deep/ "+e(t)}function e(t){return'[touch-action="'+t+'"]'}function n(t){return"{ -ms-touch-action: "+t+"; touch-action: "+t+";}"}var i=["none","auto","pan-x","pan-y",{rule:"pan-x pan-y",selectors:["pan-x pan-y","pan-y pan-x"]},"manipulation"],s="",r="string"==typeof document.head.style.touchAction,o=!window.ShadowDOMPolyfill&&document.head.createShadowRoot;if(r){i.forEach(function(i){String(i)===i?(s+=e(i)+n(i)+"\n",o&&(s+=t(i)+n(i)+"\n")):(s+=i.selectors.map(e)+n(i.rule)+"\n",o&&(s+=i.selectors.map(t)+n(i.rule)+"\n"))});var a=document.createElement("style");a.textContent=s,document.head.appendChild(a)}}(),function(t){var e=["bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","pageX","pageY"],n=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0],i=function(){return function(){}},s={preventTap:i,makeBaseEvent:function(t,e){var n=document.createEvent("Event");return n.initEvent(t,e.bubbles||!1,e.cancelable||!1),n.preventTap=s.preventTap(n),n},makeGestureEvent:function(t,e){e=e||Object.create(null);for(var n,i=this.makeBaseEvent(t,e),s=0,r=Object.keys(e);s<r.length;s++)n=r[s],"bubbles"!==n&&"cancelable"!==n&&(i[n]=e[n]);return i},makePointerEvent:function(t,i){i=i||Object.create(null);for(var s,r=this.makeBaseEvent(t,i),o=2;o<e.length;o++)s=e[o],r[s]=i[s]||n[o];r.buttons=i.buttons||0;var a=0;return a=i.pressure?i.pressure:r.buttons?.5:0,r.x=r.clientX,r.y=r.clientY,r.pointerId=i.pointerId||0,r.width=i.width||0,r.height=i.height||0,r.pressure=a,r.tiltX=i.tiltX||0,r.tiltY=i.tiltY||0,r.pointerType=i.pointerType||"",r.hwTimestamp=i.hwTimestamp||0,r.isPrimary=i.isPrimary||!1,r._source=i._source||"",r}};t.eventFactory=s}(n),function(t){function e(){if(n){var t=new Map;return t.pointers=i,t}this.keys=[],this.values=[]}var n=window.Map&&window.Map.prototype.forEach,i=function(){return this.size};e.prototype={set:function(t,e){var n=this.keys.indexOf(t);n>-1?this.values[n]=e:(this.keys.push(t),this.values.push(e))},has:function(t){return this.keys.indexOf(t)>-1},"delete":function(t){var e=this.keys.indexOf(t);e>-1&&(this.keys.splice(e,1),this.values.splice(e,1))},get:function(t){var e=this.keys.indexOf(t);return this.values[e]},clear:function(){this.keys.length=0,this.values.length=0},forEach:function(t,e){this.values.forEach(function(n,i){t.call(e,n,this.keys[i],this)},this)},pointers:function(){return this.keys.length}},t.PointerMap=e}(n),function(t){var e,n=["bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","buttons","pointerId","width","height","pressure","tiltX","tiltY","pointerType","hwTimestamp","isPrimary","type","target","currentTarget","which","pageX","pageY","timeStamp","preventTap","tapPrevented","_source"],i=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0,0,0,0,0,0,"",0,!1,"",null,null,0,0,0,0,function(){},!1],s="undefined"!=typeof SVGElementInstance,r=t.eventFactory,o={IS_IOS:!1,pointermap:new t.PointerMap,requiredGestures:new t.PointerMap,eventMap:Object.create(null),eventSources:Object.create(null),eventSourceList:[],gestures:[],dependencyMap:{down:{listeners:0,index:-1},up:{listeners:0,index:-1}},gestureQueue:[],registerSource:function(t,e){var n=e,i=n.events;i&&(i.forEach(function(t){n[t]&&(this.eventMap[t]=n[t].bind(n))},this),this.eventSources[t]=n,this.eventSourceList.push(n))},registerGesture:function(t,e){var n=Object.create(null);n.listeners=0,n.index=this.gestures.length;for(var i,s=0;s<e.exposes.length;s++)i=e.exposes[s].toLowerCase(),this.dependencyMap[i]=n;this.gestures.push(e)},register:function(t,e){for(var n,i=this.eventSourceList.length,s=0;i>s&&(n=this.eventSourceList[s]);s++)n.register.call(n,t,e)},unregister:function(t){for(var e,n=this.eventSourceList.length,i=0;n>i&&(e=this.eventSourceList[i]);i++)e.unregister.call(e,t)},down:function(t){this.requiredGestures.set(t.pointerId,e),this.fireEvent("down",t)},move:function(t){t.type="move",this.fillGestureQueue(t)},up:function(t){this.fireEvent("up",t),this.requiredGestures["delete"](t.pointerId)},cancel:function(t){t.tapPrevented=!0,this.fireEvent("up",t),this.requiredGestures["delete"](t.pointerId)},addGestureDependency:function(t,e){var n=t._pgEvents;if(n&&e)for(var i,s,r,o=Object.keys(n),a=0;a<o.length;a++)r=o[a],n[r]>0&&(i=this.dependencyMap[r],s=i?i.index:-1,e[s]=!0)},eventHandler:function(n){var i=n.type;if("touchstart"===i||"mousedown"===i||"pointerdown"===i||"MSPointerDown"===i)if(n._handledByPG||(e={}),this.IS_IOS){var s=n;if("touchstart"===i){var r=n.changedTouches[0];s={target:n.target,clientX:r.clientX,clientY:r.clientY,path:n.path}}for(var o,a=n.path||t.targetFinding.path(s),c=0;c<a.length;c++)o=a[c],this.addGestureDependency(o,e)}else this.addGestureDependency(n.currentTarget,e);if(!n._handledByPG){var u=this.eventMap&&this.eventMap[i];u&&u(n),n._handledByPG=!0}},listen:function(t,e){for(var n,i=0,s=e.length;s>i&&(n=e[i]);i++)this.addEvent(t,n)},unlisten:function(t,e){for(var n,i=0,s=e.length;s>i&&(n=e[i]);i++)this.removeEvent(t,n)},addEvent:function(t,e){t.addEventListener(e,this.boundHandler)},removeEvent:function(t,e){t.removeEventListener(e,this.boundHandler)},makeEvent:function(t,e){var n=r.makePointerEvent(t,e);return n.preventDefault=e.preventDefault,n.tapPrevented=e.tapPrevented,n._target=n._target||e.target,n},fireEvent:function(t,e){var n=this.makeEvent(t,e);return this.dispatchEvent(n)},cloneEvent:function(t){for(var e,r=Object.create(null),o=0;o<n.length;o++)e=n[o],r[e]=t[e]||i[o],("target"===e||"relatedTarget"===e)&&s&&r[e]instanceof SVGElementInstance&&(r[e]=r[e].correspondingUseElement);return r.preventDefault=function(){t.preventDefault()},r},dispatchEvent:function(t){var e=t._target;if(e){e.dispatchEvent(t);var n=this.cloneEvent(t);n.target=e,this.fillGestureQueue(n)}},gestureTrigger:function(){for(var t,e,n=0;n<this.gestureQueue.length;n++)if(t=this.gestureQueue[n],e=t._requiredGestures)for(var i,s,r=0;r<this.gestures.length;r++)e[r]&&(i=this.gestures[r],s=i[t.type],s&&s.call(i,t));this.gestureQueue.length=0},fillGestureQueue:function(t){this.gestureQueue.length||requestAnimationFrame(this.boundGestureTrigger),t._requiredGestures=this.requiredGestures.get(t.pointerId),this.gestureQueue.push(t)}};o.boundHandler=o.eventHandler.bind(o),o.boundGestureTrigger=o.gestureTrigger.bind(o),t.dispatcher=o,t.activateGesture=function(t,e){var n=e.toLowerCase(),i=o.dependencyMap[n];if(i){var s=o.gestures[i.index];if(t._pgListeners||(o.register(t),t._pgListeners=0),s){var r,a=s.defaultActions&&s.defaultActions[n];switch(t.nodeType){case Node.ELEMENT_NODE:r=t;break;case Node.DOCUMENT_FRAGMENT_NODE:r=t.host;break;default:r=null}a&&r&&!r.hasAttribute("touch-action")&&r.setAttribute("touch-action",a)}t._pgEvents||(t._pgEvents={}),t._pgEvents[n]=(t._pgEvents[n]||0)+1,t._pgListeners++}return Boolean(i)},t.addEventListener=function(e,n,i,s){i&&(t.activateGesture(e,n),e.addEventListener(n,i,s))},t.deactivateGesture=function(t,e){var n=e.toLowerCase(),i=o.dependencyMap[n];return i&&(t._pgListeners>0&&t._pgListeners--,0===t._pgListeners&&o.unregister(t),t._pgEvents&&(t._pgEvents[n]>0?t._pgEvents[n]--:t._pgEvents[n]=0)),Boolean(i)},t.removeEventListener=function(e,n,i,s){i&&(t.deactivateGesture(e,n),e.removeEventListener(n,i,s))}}(n),function(t){var e=t.dispatcher,n=e.pointermap,i=25,s=[0,1,4,2],r=0,o=/Linux.*Firefox\//i,a=function(){if(o.test(navigator.userAgent))return!1;try{return 1===new MouseEvent("test",{buttons:1}).buttons}catch(t){return!1}}(),c={POINTER_ID:1,POINTER_TYPE:"mouse",events:["mousedown","mousemove","mouseup"],exposes:["down","up","move"],register:function(t){e.listen(t,this.events)},unregister:function(t){t.nodeType!==Node.DOCUMENT_NODE&&e.unlisten(t,this.events)},lastTouches:[],isEventSimulatedFromTouch:function(t){for(var e,n=this.lastTouches,s=t.clientX,r=t.clientY,o=0,a=n.length;a>o&&(e=n[o]);o++){var c=Math.abs(s-e.x),u=Math.abs(r-e.y);if(i>=c&&i>=u)return!0}},prepareEvent:function(t){var n=e.cloneEvent(t);if(n.pointerId=this.POINTER_ID,n.isPrimary=!0,n.pointerType=this.POINTER_TYPE,n._source="mouse",!a){var i=t.type,o=s[t.which]||0;"mousedown"===i?r|=o:"mouseup"===i&&(r&=~o),n.buttons=r}return n},mousedown:function(i){if(!this.isEventSimulatedFromTouch(i)){var s=(n.has(this.POINTER_ID),this.prepareEvent(i));s.target=t.findTarget(i),n.set(this.POINTER_ID,s.target),e.down(s)}},mousemove:function(t){if(!this.isEventSimulatedFromTouch(t)){var i=n.get(this.POINTER_ID);if(i){var s=this.prepareEvent(t);s.target=i,0===(a?s.buttons:s.which)?(a||(r=s.buttons=0),e.cancel(s),this.cleanupMouse(s.buttons)):e.move(s)}}},mouseup:function(i){if(!this.isEventSimulatedFromTouch(i)){var s=this.prepareEvent(i);s.relatedTarget=t.findTarget(i),s.target=n.get(this.POINTER_ID),e.up(s),this.cleanupMouse(s.buttons)}},cleanupMouse:function(t){0===t&&n["delete"](this.POINTER_ID)}};t.mouseEvents=c}(n),function(t){var e=t.dispatcher,n=(t.targetFinding.allShadows.bind(t.targetFinding),e.pointermap),i=(Array.prototype.map.call.bind(Array.prototype.map),2500),s=25,r=200,o=20,a=!1,c={IS_IOS:!1,events:["touchstart","touchmove","touchend","touchcancel"],exposes:["down","up","move"],register:function(t,n){(this.IS_IOS?n:!n)&&e.listen(t,this.events)},unregister:function(t){this.IS_IOS||e.unlisten(t,this.events)},scrollTypes:{EMITTER:"none",XSCROLLER:"pan-x",YSCROLLER:"pan-y"},touchActionToScrollType:function(t){var e=t,n=this.scrollTypes;return e===n.EMITTER?"none":e===n.XSCROLLER?"X":e===n.YSCROLLER?"Y":"XY"},POINTER_TYPE:"touch",firstTouch:null,isPrimaryTouch:function(t){return this.firstTouch===t.identifier},setPrimaryTouch:function(t){(0===n.pointers()||1===n.pointers()&&n.has(1))&&(this.firstTouch=t.identifier,this.firstXY={X:t.clientX,Y:t.clientY},this.firstTarget=t.target,this.scrolling=null,this.cancelResetClickCount())},removePrimaryPointer:function(t){t.isPrimary&&(this.firstTouch=null,this.firstXY=null,this.resetClickCount())},clickCount:0,resetId:null,resetClickCount:function(){var t=function(){this.clickCount=0,this.resetId=null}.bind(this);this.resetId=setTimeout(t,r)},cancelResetClickCount:function(){this.resetId&&clearTimeout(this.resetId)},typeToButtons:function(t){var e=0;return("touchstart"===t||"touchmove"===t)&&(e=1),e},findTarget:function(e,i){if("touchstart"===this.currentTouchEvent.type){if(this.isPrimaryTouch(e)){var s={clientX:e.clientX,clientY:e.clientY,path:this.currentTouchEvent.path,target:this.currentTouchEvent.target};return t.findTarget(s)}return t.findTarget(e);
}return n.get(i)},touchToPointer:function(t){var n=this.currentTouchEvent,i=e.cloneEvent(t),s=i.pointerId=t.identifier+2;i.target=this.findTarget(t,s),i.bubbles=!0,i.cancelable=!0,i.detail=this.clickCount,i.buttons=this.typeToButtons(n.type),i.width=t.webkitRadiusX||t.radiusX||0,i.height=t.webkitRadiusY||t.radiusY||0,i.pressure=t.webkitForce||t.force||.5,i.isPrimary=this.isPrimaryTouch(t),i.pointerType=this.POINTER_TYPE,i._source="touch";var r=this;return i.preventDefault=function(){r.scrolling=!1,r.firstXY=null,n.preventDefault()},i},processTouches:function(t,e){var i=t.changedTouches;this.currentTouchEvent=t;for(var s,r,o=0;o<i.length;o++)s=i[o],r=this.touchToPointer(s),"touchstart"===t.type&&n.set(r.pointerId,r.target),n.has(r.pointerId)&&e.call(this,r),("touchend"===t.type||t._cancel)&&this.cleanUpPointer(r)},shouldScroll:function(e){if(this.firstXY){var n,i=t.targetFinding.findTouchAction(e),s=this.touchActionToScrollType(i);if("none"===s)n=!1;else if("XY"===s)n=!0;else{var r=e.changedTouches[0],o=s,a="Y"===s?"X":"Y",c=Math.abs(r["client"+o]-this.firstXY[o]),u=Math.abs(r["client"+a]-this.firstXY[a]);n=c>=u}return n}},findTouch:function(t,e){for(var n,i=0,s=t.length;s>i&&(n=t[i]);i++)if(n.identifier===e)return!0},vacuumTouches:function(t){var e=t.touches;if(n.pointers()>=e.length){var i=[];n.forEach(function(t,n){if(1!==n&&!this.findTouch(e,n-2)){var s=t;i.push(s)}},this),i.forEach(function(t){this.cancel(t),n["delete"](t.pointerId)},this)}},touchstart:function(t){this.vacuumTouches(t),this.setPrimaryTouch(t.changedTouches[0]),this.dedupSynthMouse(t),this.scrolling||(this.clickCount++,this.processTouches(t,this.down))},down:function(t){e.down(t)},touchmove:function(t){if(a)t.cancelable&&this.processTouches(t,this.move);else if(this.scrolling){if(this.firstXY){var e=t.changedTouches[0],n=e.clientX-this.firstXY.X,i=e.clientY-this.firstXY.Y,s=Math.sqrt(n*n+i*i);s>=o&&(this.touchcancel(t),this.scrolling=!0,this.firstXY=null)}}else null===this.scrolling&&this.shouldScroll(t)?this.scrolling=!0:(this.scrolling=!1,t.preventDefault(),this.processTouches(t,this.move))},move:function(t){e.move(t)},touchend:function(t){this.dedupSynthMouse(t),this.processTouches(t,this.up)},up:function(n){n.relatedTarget=t.findTarget(n),e.up(n)},cancel:function(t){e.cancel(t)},touchcancel:function(t){t._cancel=!0,this.processTouches(t,this.cancel)},cleanUpPointer:function(t){n["delete"](t.pointerId),this.removePrimaryPointer(t)},dedupSynthMouse:function(e){var n=t.mouseEvents.lastTouches,s=e.changedTouches[0];if(this.isPrimaryTouch(s)){var r={x:s.clientX,y:s.clientY};n.push(r);var o=function(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}.bind(null,n,r);setTimeout(o,i)}}},u=Event.prototype.stopImmediatePropagation||Event.prototype.stopPropagation;document.addEventListener("click",function(e){var n=e.clientX,i=e.clientY,r=function(t){var e=Math.abs(n-t.x),r=Math.abs(i-t.y);return s>=e&&s>=r},o=t.mouseEvents.lastTouches.some(r),a=t.targetFinding.path(e);if(o){for(var h=0;h<a.length;h++)if(a[h]===c.firstTarget)return;e.preventDefault(),u.call(e)}},!0),t.touchEvents=c}(n),function(t){var e=t.dispatcher,n=e.pointermap,i=window.MSPointerEvent&&"number"==typeof window.MSPointerEvent.MSPOINTER_TYPE_MOUSE,s={events:["MSPointerDown","MSPointerMove","MSPointerUp","MSPointerCancel"],register:function(t){e.listen(t,this.events)},unregister:function(t){t.nodeType!==Node.DOCUMENT_NODE&&e.unlisten(t,this.events)},POINTER_TYPES:["","unavailable","touch","pen","mouse"],prepareEvent:function(t){var n=t;return n=e.cloneEvent(t),i&&(n.pointerType=this.POINTER_TYPES[t.pointerType]),n._source="ms",n},cleanup:function(t){n["delete"](t)},MSPointerDown:function(i){var s=this.prepareEvent(i);s.target=t.findTarget(i),n.set(i.pointerId,s.target),e.down(s)},MSPointerMove:function(t){var i=n.get(t.pointerId);if(i){var s=this.prepareEvent(t);s.target=i,e.move(s)}},MSPointerUp:function(i){var s=this.prepareEvent(i);s.relatedTarget=t.findTarget(i),s.target=n.get(s.pointerId),e.up(s),this.cleanup(i.pointerId)},MSPointerCancel:function(i){var s=this.prepareEvent(i);s.relatedTarget=t.findTarget(i),s.target=n.get(s.pointerId),e.cancel(s),this.cleanup(i.pointerId)}};t.msEvents=s}(n),function(t){var e=t.dispatcher,n=e.pointermap,i={events:["pointerdown","pointermove","pointerup","pointercancel"],prepareEvent:function(t){var n=e.cloneEvent(t);return n._source="pointer",n},register:function(t){e.listen(t,this.events)},unregister:function(t){t.nodeType!==Node.DOCUMENT_NODE&&e.unlisten(t,this.events)},cleanup:function(t){n["delete"](t)},pointerdown:function(i){var s=this.prepareEvent(i);s.target=t.findTarget(i),n.set(s.pointerId,s.target),e.down(s)},pointermove:function(t){var i=n.get(t.pointerId);if(i){var s=this.prepareEvent(t);s.target=i,e.move(s)}},pointerup:function(i){var s=this.prepareEvent(i);s.relatedTarget=t.findTarget(i),s.target=n.get(s.pointerId),e.up(s),this.cleanup(i.pointerId)},pointercancel:function(i){var s=this.prepareEvent(i);s.relatedTarget=t.findTarget(i),s.target=n.get(s.pointerId),e.cancel(s),this.cleanup(i.pointerId)}};t.pointerEvents=i}(n),function(t){var e=t.dispatcher,n=window.navigator;window.PointerEvent?e.registerSource("pointer",t.pointerEvents):n.msPointerEnabled?e.registerSource("ms",t.msEvents):(e.registerSource("mouse",t.mouseEvents),void 0!==window.ontouchstart&&e.registerSource("touch",t.touchEvents));var i=navigator.userAgent,s=i.match(/iPad|iPhone|iPod/)&&"ontouchstart"in window;e.IS_IOS=s,t.touchEvents.IS_IOS=s,e.register(document,!0)}(n),function(t){var e=t.dispatcher,n=t.eventFactory,i=new t.PointerMap,s={events:["down","move","up"],exposes:["trackstart","track","trackx","tracky","trackend"],defaultActions:{track:"none",trackx:"pan-y",tracky:"pan-x"},WIGGLE_THRESHOLD:4,clampDir:function(t){return t>0?1:-1},calcPositionDelta:function(t,e){var n=0,i=0;return t&&e&&(n=e.pageX-t.pageX,i=e.pageY-t.pageY),{x:n,y:i}},fireTrack:function(t,e,i){var s=i,r=this.calcPositionDelta(s.downEvent,e),o=this.calcPositionDelta(s.lastMoveEvent,e);if(o.x)s.xDirection=this.clampDir(o.x);else if("trackx"===t)return;if(o.y)s.yDirection=this.clampDir(o.y);else if("tracky"===t)return;var a={bubbles:!0,cancelable:!0,trackInfo:s.trackInfo,relatedTarget:e.relatedTarget,pointerType:e.pointerType,pointerId:e.pointerId,_source:"track"};"tracky"!==t&&(a.x=e.x,a.dx=r.x,a.ddx=o.x,a.clientX=e.clientX,a.pageX=e.pageX,a.screenX=e.screenX,a.xDirection=s.xDirection),"trackx"!==t&&(a.dy=r.y,a.ddy=o.y,a.y=e.y,a.clientY=e.clientY,a.pageY=e.pageY,a.screenY=e.screenY,a.yDirection=s.yDirection);var c=n.makeGestureEvent(t,a);s.downTarget.dispatchEvent(c)},down:function(t){if(t.isPrimary&&("mouse"===t.pointerType?1===t.buttons:!0)){var e={downEvent:t,downTarget:t.target,trackInfo:{},lastMoveEvent:null,xDirection:0,yDirection:0,tracking:!1};i.set(t.pointerId,e)}},move:function(t){var e=i.get(t.pointerId);if(e){if(!e.tracking){var n=this.calcPositionDelta(e.downEvent,t),s=n.x*n.x+n.y*n.y;s>this.WIGGLE_THRESHOLD&&(e.tracking=!0,e.lastMoveEvent=e.downEvent,this.fireTrack("trackstart",t,e))}e.tracking&&(this.fireTrack("track",t,e),this.fireTrack("trackx",t,e),this.fireTrack("tracky",t,e)),e.lastMoveEvent=t}},up:function(t){var e=i.get(t.pointerId);e&&(e.tracking&&this.fireTrack("trackend",t,e),i["delete"](t.pointerId))}};e.registerGesture("track",s)}(n),function(t){var e=t.dispatcher,n=t.eventFactory,i={HOLD_DELAY:200,WIGGLE_THRESHOLD:16,events:["down","move","up"],exposes:["hold","holdpulse","release"],heldPointer:null,holdJob:null,pulse:function(){var t=Date.now()-this.heldPointer.timeStamp,e=this.held?"holdpulse":"hold";this.fireHold(e,t),this.held=!0},cancel:function(){clearInterval(this.holdJob),this.held&&this.fireHold("release"),this.held=!1,this.heldPointer=null,this.target=null,this.holdJob=null},down:function(t){t.isPrimary&&!this.heldPointer&&(this.heldPointer=t,this.target=t.target,this.holdJob=setInterval(this.pulse.bind(this),this.HOLD_DELAY))},up:function(t){this.heldPointer&&this.heldPointer.pointerId===t.pointerId&&this.cancel()},move:function(t){if(this.heldPointer&&this.heldPointer.pointerId===t.pointerId){var e=t.clientX-this.heldPointer.clientX,n=t.clientY-this.heldPointer.clientY;e*e+n*n>this.WIGGLE_THRESHOLD&&this.cancel()}},fireHold:function(t,e){var i={bubbles:!0,cancelable:!0,pointerType:this.heldPointer.pointerType,pointerId:this.heldPointer.pointerId,x:this.heldPointer.clientX,y:this.heldPointer.clientY,_source:"hold"};e&&(i.holdTime=e);var s=n.makeGestureEvent(t,i);this.target.dispatchEvent(s)}};e.registerGesture("hold",i)}(n),function(t){var e=t.dispatcher,n=t.eventFactory,i=new t.PointerMap,s={events:["down","up"],exposes:["tap"],down:function(t){t.isPrimary&&!t.tapPrevented&&i.set(t.pointerId,{target:t.target,buttons:t.buttons,x:t.clientX,y:t.clientY})},shouldTap:function(t,e){var n=!0;return"mouse"===t.pointerType&&(n=1^t.buttons&&1&e.buttons),n&&!t.tapPrevented},up:function(e){var s=i.get(e.pointerId);if(s&&this.shouldTap(e,s)){var r=t.targetFinding.LCA(s.target,e.relatedTarget);if(r){var o=n.makeGestureEvent("tap",{bubbles:!0,cancelable:!0,x:e.clientX,y:e.clientY,detail:e.detail,pointerType:e.pointerType,pointerId:e.pointerId,altKey:e.altKey,ctrlKey:e.ctrlKey,metaKey:e.metaKey,shiftKey:e.shiftKey,_source:"tap"});r.dispatchEvent(o)}}i["delete"](e.pointerId)}};n.preventTap=function(t){return function(){t.tapPrevented=!0,i["delete"](t.pointerId)}},e.registerGesture("tap",s)}(n),function(t){var e=t.dispatcher,n=t.eventFactory,i=new t.PointerMap,s=180/Math.PI,r={events:["down","up","move","cancel"],exposes:["pinchstart","pinch","pinchend","rotate"],defaultActions:{pinch:"none",rotate:"none"},reference:{},down:function(e){if(i.set(e.pointerId,e),2==i.pointers()){var n=this.calcChord(),s=this.calcAngle(n);this.reference={angle:s,diameter:n.diameter,target:t.targetFinding.LCA(n.a.target,n.b.target)},this.firePinch("pinchstart",n.diameter,n)}},up:function(t){var e=i.get(t.pointerId),n=i.pointers();if(e){if(2===n){var s=this.calcChord();this.firePinch("pinchend",s.diameter,s)}i["delete"](t.pointerId)}},move:function(t){i.has(t.pointerId)&&(i.set(t.pointerId,t),i.pointers()>1&&this.calcPinchRotate())},cancel:function(t){this.up(t)},firePinch:function(t,e,i){var s=e/this.reference.diameter,r=n.makeGestureEvent(t,{bubbles:!0,cancelable:!0,scale:s,centerX:i.center.x,centerY:i.center.y,_source:"pinch"});this.reference.target.dispatchEvent(r)},fireRotate:function(t,e){var i=Math.round((t-this.reference.angle)%360),s=n.makeGestureEvent("rotate",{bubbles:!0,cancelable:!0,angle:i,centerX:e.center.x,centerY:e.center.y,_source:"pinch"});this.reference.target.dispatchEvent(s)},calcPinchRotate:function(){var t=this.calcChord(),e=t.diameter,n=this.calcAngle(t);e!=this.reference.diameter&&this.firePinch("pinch",e,t),n!=this.reference.angle&&this.fireRotate(n,t)},calcChord:function(){var t=[];i.forEach(function(e){t.push(e)});for(var e,n,s,r=0,o={a:t[0],b:t[1]},a=0;a<t.length;a++)for(var c=t[a],u=a+1;u<t.length;u++){var h=t[u];e=Math.abs(c.clientX-h.clientX),n=Math.abs(c.clientY-h.clientY),s=e+n,s>r&&(r=s,o={a:c,b:h})}return e=Math.abs(o.a.clientX+o.b.clientX)/2,n=Math.abs(o.a.clientY+o.b.clientY)/2,o.center={x:e,y:n},o.diameter=r,o},calcAngle:function(t){var e=t.a.clientX-t.b.clientX,n=t.a.clientY-t.b.clientY;return(360+Math.atan2(n,e)*s)%360}};e.registerGesture("pinch",r)}(n)},{}]},{},[2]);