<!DOCTYPE html>

<html>

<head>
    <meta charset="UTF-8">
    <title>fincanvas</title>
    <script src="main.js"></script>
    <style>
        body {
            font-family: sans-serif;
            font-size: small;
        }
        #canvas {
            position: absolute;
            top: 5%;
            right: 5%;
            bottom: 5%;
            left: 5%;
        }
    </style>
</head>

<body>
<input id="repaint" type="checkbox" checked/> Repaint
<div id="canvas" fps="60"></div>
</body>
    <script>
        var div = document.querySelector('#canvas'),
            main = function(gc) {
                var rect = this.bounds;
                gc.translate(rect.left, rect.top);
                gc.rect(0, 0, rect.width, rect.height);
                gc.clip();
                gc.beginPath();
                gc.fillStyle = 'pink';
                gc.fillRect(0, 0, rect.width, rect.height);
            },
            component = {
                setBounds: function(rectangle) {
                    this.bounds = rectangle;
                },
                _paint: main
            },
            c = new fin.Canvas(div, component),
            eventNames = ['fin-canvas-dragstart','fin-canvas-drag', 'fin-canvas-mousemove', 'fin-canvas-mousedown', 'fin-canvas-dragend', 'fin-canvas-mouseup', 'fin-canvas-mouseout', 'fin-canvas-wheelmoved', 'fin-canvas-click', 'fin-canvas-release', 'fin-canvas-flick', 'fin-canvas-trackstart', 'fin-canvas-track', 'fin-canvas-trackend', 'fin-canvas-hold', 'fin-canvas-holdpulse', 'fin-canvas-tap', 'fin-canvas-dblclick', 'fin-canvas-keydown', 'fin-canvas-keyup', 'fin-canvas-focus-gained', 'fin-canvas-focus-lost', 'fin-canvas-context-menu'];

        setInterval(function() {
            c.repaint();
        }, 100);

        eventNames.forEach(function(name) {
            c.addEventListener(name, logEvt);
        });

        document.querySelector('#repaint').onclick = function() {
            c[this.checked ? 'restartPaintThread' : 'stopPaintThread']();
        };

        function logEvt(e) {
            console.log(e.type);
        }

    </script>
</html>
