<!DOCTYPE html>

<html>

<head>
    <meta charset="UTF-8">
    <title>fincanvas</title>
    <script src="main.js"></script>
    <style>
        body {
            font-family: sans-serif;
            font-size: small;
        }
        #canvas {
            position: absolute;
            top: 5%;
            right: 5%;
            bottom: 5%;
            left: 5%;
        }
    </style>
</head>

<body>
<input id="repaint" type="checkbox" checked/> Repaint
<div id="canvas" fps="60"></div>
</body>
    <script>
        var div = document.querySelector('#canvas'),
            main = function(gc) {
                var rect = this.bounds;
                gc.translate(rect.left, rect.top);
                gc.rect(0, 0, rect.width, rect.height);
                gc.clip();
                gc.beginPath();
                gc.fillStyle = 'pink';
                gc.fillRect(0, 0, rect.width, rect.height);
            },
            component = {
                setBounds: function(rectangle) {
                    this.bounds = rectangle;
                },
                _paint: main
            },
            c = new fin.Canvas(div, component),
            eventNames = [
                'dragstart',
                'drag',
                'mousemove',
                'mousedown',
                'dragend',
                'mouseup',
                'mouseout',
                'wheelmoved',
                'click',
                'release',
                'flick',
                'trackstart',
                'track',
                'trackend',
                'hold',
                'holdpulse',
                'tap',
                'dblclick',
                'keydown',
                'keyup',
                'focus-gained',
                'focus-lost',
                'context-menu'
            ];

        eventNames.forEach(function(name) {
            c.addEventListener('fin-canvas-' + name, logEvt);
        });

        document.querySelector('#repaint').onclick = function() {
            c[this.checked ? 'restartPaintThread' : 'stopPaintThread']();
        };

        // setInterval(function() {
        //     c.repaint();
        // }, 100);

        function logEvt(e) {
            console.log(e.type);
        }

    </script>
</html>
